<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>牛客网Shell编程题 | wenyang的空间</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/wenyangliublog/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/wenyangliublog/assets/css/0.styles.251aa2c4.css" as="style"><link rel="preload" href="/wenyangliublog/assets/js/app.05c06663.js" as="script"><link rel="preload" href="/wenyangliublog/assets/js/3.dedc53ea.js" as="script"><link rel="preload" href="/wenyangliublog/assets/js/1.4a671905.js" as="script"><link rel="preload" href="/wenyangliublog/assets/js/53.13fa7b2b.js" as="script"><link rel="prefetch" href="/wenyangliublog/assets/js/10.5f87cbcc.js"><link rel="prefetch" href="/wenyangliublog/assets/js/11.f895a074.js"><link rel="prefetch" href="/wenyangliublog/assets/js/12.dbe5cb67.js"><link rel="prefetch" href="/wenyangliublog/assets/js/13.1e5c514e.js"><link rel="prefetch" href="/wenyangliublog/assets/js/14.50c52bf4.js"><link rel="prefetch" href="/wenyangliublog/assets/js/15.b0bc73fc.js"><link rel="prefetch" href="/wenyangliublog/assets/js/16.c39eaaf8.js"><link rel="prefetch" href="/wenyangliublog/assets/js/17.ef43cd68.js"><link rel="prefetch" href="/wenyangliublog/assets/js/18.87af2ea4.js"><link rel="prefetch" href="/wenyangliublog/assets/js/19.aa1f94b2.js"><link rel="prefetch" href="/wenyangliublog/assets/js/20.54b8dd05.js"><link rel="prefetch" href="/wenyangliublog/assets/js/21.41ab53d5.js"><link rel="prefetch" href="/wenyangliublog/assets/js/22.5b6ade04.js"><link rel="prefetch" href="/wenyangliublog/assets/js/23.4debf3aa.js"><link rel="prefetch" href="/wenyangliublog/assets/js/24.17db4069.js"><link rel="prefetch" href="/wenyangliublog/assets/js/25.1052a38c.js"><link rel="prefetch" href="/wenyangliublog/assets/js/26.ec0d32fe.js"><link rel="prefetch" href="/wenyangliublog/assets/js/27.e458e06e.js"><link rel="prefetch" href="/wenyangliublog/assets/js/28.4f0030b4.js"><link rel="prefetch" href="/wenyangliublog/assets/js/29.d4e41bd2.js"><link rel="prefetch" href="/wenyangliublog/assets/js/30.4576a67e.js"><link rel="prefetch" href="/wenyangliublog/assets/js/31.01a33610.js"><link rel="prefetch" href="/wenyangliublog/assets/js/32.94439d38.js"><link rel="prefetch" href="/wenyangliublog/assets/js/33.741d22dc.js"><link rel="prefetch" href="/wenyangliublog/assets/js/34.75c02258.js"><link rel="prefetch" href="/wenyangliublog/assets/js/35.b46bd3e8.js"><link rel="prefetch" href="/wenyangliublog/assets/js/36.73acb2c5.js"><link rel="prefetch" href="/wenyangliublog/assets/js/37.8f47ca5b.js"><link rel="prefetch" href="/wenyangliublog/assets/js/38.4a98a08b.js"><link rel="prefetch" href="/wenyangliublog/assets/js/39.240c37db.js"><link rel="prefetch" href="/wenyangliublog/assets/js/4.827bc8fd.js"><link rel="prefetch" href="/wenyangliublog/assets/js/40.a00ece13.js"><link rel="prefetch" href="/wenyangliublog/assets/js/41.c426d9bb.js"><link rel="prefetch" href="/wenyangliublog/assets/js/42.1acd4bca.js"><link rel="prefetch" href="/wenyangliublog/assets/js/43.48845929.js"><link rel="prefetch" href="/wenyangliublog/assets/js/44.eb28a660.js"><link rel="prefetch" href="/wenyangliublog/assets/js/45.5b2243ac.js"><link rel="prefetch" href="/wenyangliublog/assets/js/46.629cb117.js"><link rel="prefetch" href="/wenyangliublog/assets/js/47.8fbc49cc.js"><link rel="prefetch" href="/wenyangliublog/assets/js/48.6acb8bfe.js"><link rel="prefetch" href="/wenyangliublog/assets/js/49.968464c1.js"><link rel="prefetch" href="/wenyangliublog/assets/js/5.8a0f8e79.js"><link rel="prefetch" href="/wenyangliublog/assets/js/50.d88bd71f.js"><link rel="prefetch" href="/wenyangliublog/assets/js/51.fd3a9d17.js"><link rel="prefetch" href="/wenyangliublog/assets/js/52.83a11968.js"><link rel="prefetch" href="/wenyangliublog/assets/js/54.90d6b587.js"><link rel="prefetch" href="/wenyangliublog/assets/js/55.904c22e1.js"><link rel="prefetch" href="/wenyangliublog/assets/js/56.76eaeb6a.js"><link rel="prefetch" href="/wenyangliublog/assets/js/57.614d2d8a.js"><link rel="prefetch" href="/wenyangliublog/assets/js/58.0af68873.js"><link rel="prefetch" href="/wenyangliublog/assets/js/59.5c6c7220.js"><link rel="prefetch" href="/wenyangliublog/assets/js/6.feff5afd.js"><link rel="prefetch" href="/wenyangliublog/assets/js/60.2a61f6f9.js"><link rel="prefetch" href="/wenyangliublog/assets/js/61.af3c02cc.js"><link rel="prefetch" href="/wenyangliublog/assets/js/62.d89f0b4d.js"><link rel="prefetch" href="/wenyangliublog/assets/js/63.4095c81e.js"><link rel="prefetch" href="/wenyangliublog/assets/js/64.579df1c6.js"><link rel="prefetch" href="/wenyangliublog/assets/js/65.fcd61575.js"><link rel="prefetch" href="/wenyangliublog/assets/js/66.3236f4df.js"><link rel="prefetch" href="/wenyangliublog/assets/js/67.839f3365.js"><link rel="prefetch" href="/wenyangliublog/assets/js/68.9b914030.js"><link rel="prefetch" href="/wenyangliublog/assets/js/69.dec70543.js"><link rel="prefetch" href="/wenyangliublog/assets/js/7.0a287c55.js"><link rel="prefetch" href="/wenyangliublog/assets/js/70.d5cfffe6.js"><link rel="prefetch" href="/wenyangliublog/assets/js/71.a55294c0.js"><link rel="prefetch" href="/wenyangliublog/assets/js/72.b9544613.js"><link rel="prefetch" href="/wenyangliublog/assets/js/73.7515cacb.js"><link rel="prefetch" href="/wenyangliublog/assets/js/74.8d06baa8.js"><link rel="prefetch" href="/wenyangliublog/assets/js/75.20f31989.js"><link rel="prefetch" href="/wenyangliublog/assets/js/76.6194090e.js"><link rel="prefetch" href="/wenyangliublog/assets/js/77.388beff3.js"><link rel="prefetch" href="/wenyangliublog/assets/js/78.ef8c341a.js"><link rel="prefetch" href="/wenyangliublog/assets/js/79.a40a05b3.js"><link rel="prefetch" href="/wenyangliublog/assets/js/8.b603f622.js"><link rel="prefetch" href="/wenyangliublog/assets/js/80.e3a75198.js"><link rel="prefetch" href="/wenyangliublog/assets/js/81.a6e9fa65.js"><link rel="prefetch" href="/wenyangliublog/assets/js/82.2d62ec68.js"><link rel="prefetch" href="/wenyangliublog/assets/js/9.a5452f37.js">
    <link rel="stylesheet" href="/wenyangliublog/assets/css/0.styles.251aa2c4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-2d5f533b><div data-v-2d5f533b><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-2d5f533b data-v-2d5f533b><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-2d5f533b data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>wenyang的空间</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>wenyang的空间</span>
            
          <span data-v-64685f0e>2020 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-2d5f533b><header class="navbar" data-v-2d5f533b><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wenyangliublog/" class="home-link router-link-active"><img src="/wenyangliublog/logo.png" alt="wenyang的空间" class="logo"> <span class="site-name">wenyang的空间</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wenyangliublog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/日常/" class="nav-link"><i class="iconfont undefined"></i>
  日常
</a></li><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/数据库/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/后端/" class="nav-link"><i class="iconfont undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/服务器/" class="nav-link"><i class="iconfont undefined"></i>
  服务器
</a></li></ul></div></div><div class="nav-item"><a href="/wenyangliublog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/wenyangliublog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wenyangliublog/docs/rust/" class="nav-link"><i class="iconfont undefined"></i>
  rust学习笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wenyangliu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-2d5f533b></div> <aside class="sidebar" data-v-2d5f533b><div class="personal-info-wrapper" data-v-ca798c94 data-v-2d5f533b><img src="/wenyangliublog/avatar.jpg" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    wenyang的空间
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>51</h3> <h6 data-v-ca798c94>文章</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>23</h3> <h6 data-v-ca798c94>标签</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/wenyangliublog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/日常/" class="nav-link"><i class="iconfont undefined"></i>
  日常
</a></li><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/数据库/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/后端/" class="nav-link"><i class="iconfont undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/wenyangliublog/categories/服务器/" class="nav-link"><i class="iconfont undefined"></i>
  服务器
</a></li></ul></div></div><div class="nav-item"><a href="/wenyangliublog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/wenyangliublog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wenyangliublog/docs/rust/" class="nav-link"><i class="iconfont undefined"></i>
  rust学习笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wenyangliu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>牛客网Shell编程题</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>wenyang的空间</span>
            
          <span data-v-64685f0e>2020 - </span>
          2022
        </a></span></div></div> <div data-v-2d5f533b><main class="page" style="padding-right:0;"><div class="page-title" style="display:none;"><h1 class="title">牛客网Shell编程题</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>wenyang的空间</span></i> <i class="iconfont reco-date" data-v-3b7f5bdf><span data-v-3b7f5bdf>2021-12-17</span></i> <i class="iconfont reco-eye" data-v-3b7f5bdf><span id="/wenyangliublog/blogs/frontEnd/2021/12/17.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-3b7f5bdf><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-3b7f5bdf><span class="tag-item" data-v-3b7f5bdf>shell</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="_1-统计文件的行数"><a href="#_1-统计文件的行数" class="header-anchor">#</a> 1.统计文件的行数</h2> <p><strong>描述</strong><br>
写一个 bash脚本以输出一个文本文件 nowcoder.txt中的行数</p> <p>示例:<br>
假设 nowcoder.txt 内容如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>#include &lt;iostream&gt;
using namespace std;
int main()
{
    int a = 10;
    int b = 100;
    cout &lt;&lt; &quot;a + b:&quot; &lt;&lt; a + b &lt;&lt; endl;
    return 0;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>你的脚本应当输出：<br>
9</p> <p><strong>解答</strong><br>
这里有很多命令可以得出这个答案</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">###方法一：列出所有行数|查看倒数第一行</span>
<span class="token function">awk</span> <span class="token string">'{print NR}'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">tail</span> -n1

<span class="token comment">###方法二</span>
<span class="token function">awk</span> <span class="token string">'END{print NR}'</span> nowcoder.txt

<span class="token comment">###方法三</span>
<span class="token function">sed</span> -n <span class="token string">'$='</span> nowcoder.txt

<span class="token comment">###方法四</span>
<span class="token function">cat</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">wc</span> -l
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_2-打印文件的最后5行"><a href="#_2-打印文件的最后5行" class="header-anchor">#</a> 2.打印文件的最后5行</h2> <p><strong>描述</strong><br>
经常查看日志的时候，会从文件的末尾往前查看，于是请你写一个 bash脚本以输出一个文本文件 nowcoder.txt中的最后5行</p> <p>示例:
假设 nowcoder.txt 内容如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>#include&lt;iostream&gt;
using namespace std;
int main()
{
int a = 10;
int b = 100;
cout &lt;&lt; &quot;a + b:&quot; &lt;&lt; a + b &lt;&lt; endl;
return 0;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>你的脚本应当输出：</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>int a = 10;
int b = 100;
cout &lt;&lt; &quot;a + b:&quot; &lt;&lt; a + b &lt;&lt; endl;
return 0;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">tail</span> -5 nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_3-输出7的倍数"><a href="#_3-输出7的倍数" class="header-anchor">#</a> 3.输出7的倍数</h2> <p><strong>描述</strong><br>
写一个 bash脚本以输出数字 0 到 500 中 7 的倍数(0 7 14 21...)的命令</p> <p><strong>解答</strong></p> <p><code>seq</code> 用于生成从一个数到另一个数之间的所有整数<br>
用法：seq [选项]...尾数<br>
或：seq [选项]... 首数 尾数<br>
或：seq [选项]... 首数 增量 尾数</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">seq</span> <span class="token number">0</span> <span class="token number">7</span> <span class="token number">500</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_4-输出第5行的内容"><a href="#_4-输出第5行的内容" class="header-anchor">#</a> 4.输出第5行的内容</h2> <p><strong>描述</strong><br>
写一个 bash脚本以输出一个文本文件 nowcoder.txt 中第5行的内容。</p> <p>示例:<br>
假设 nowcoder.txt 内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>welcome
to
nowcoder
this
is
shell
code
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>你的脚本应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>is
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">sed</span> -n <span class="token string">'5p'</span> nowcoder.txt

<span class="token function">awk</span> <span class="token string">'NR==5{print <span class="token variable">$0</span>}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_5-打印空行的行号"><a href="#_5-打印空行的行号" class="header-anchor">#</a> 5.打印空行的行号</h2> <p><strong>描述</strong><br>
写一个 bash脚本以输出一个文本文件 nowcoder.txt中空行的行号,可能连续,从1开始</p> <p>示例:<br>
假设 nowcoder.txt 内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>a
b

c

d

e


f
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>你的脚本应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>3
5
7
9
10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">###方法1</span>
<span class="token function">grep</span> -n <span class="token string">'^$'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">':'</span> -f1

<span class="token comment">###方法2</span>
<span class="token function">sed</span> -n <span class="token string">'/^$/='</span> nowcoder.txt

<span class="token comment">###方法3</span>
<span class="token function">awk</span> <span class="token string">'/^$/{print NR}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_6-去掉空行"><a href="#_6-去掉空行" class="header-anchor">#</a> 6.去掉空行</h2> <p><strong>描述</strong><br>
写一个 bash脚本以去掉一个文本文件 nowcoder.txt中的空行</p> <p>示例:<br>
假设 nowcoder.txt 内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>abc

567


aaa
bbb



ccc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>你的脚本应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>abc
567
aaa
bbb
ccc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">grep</span> -v <span class="token string">'^$'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_7-打印字母数小于8的单词"><a href="#_7-打印字母数小于8的单词" class="header-anchor">#</a> 7.打印字母数小于8的单词</h2> <p><strong>描述</strong><br>
写一个 bash脚本以统计一个文本文件 nowcoder.txt中字母数小于8的单词。</p> <p>示例:<br>
假设 nowcoder.txt 内容如下：<br>
how they are implemented and applied in computer</p> <p>你的脚本应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>how
they
are
and
applied
in
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> <span class="token string">'{for(i=1;i&lt;NF;i++)if(length(<span class="token variable">$i</span>)&lt;8)print <span class="token variable">$i</span>;}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_8-统计所有进程占用内存大小的和"><a href="#_8-统计所有进程占用内存大小的和" class="header-anchor">#</a> 8.统计所有进程占用内存大小的和</h2> <p><strong>描述</strong><br>
假设 nowcoder.txt 内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>root         2  0.0  0.0      0     0 ?        S    9月25   0:00 [kthreadd]
root         4  0.0  0.0      0     0 ?        I&lt;   9月25   0:00 [kworker/0:0H]
web       1638  1.8  1.8 6311352 612400 ?      Sl   10月16  21:52 test
web       1639  2.0  1.8 6311352 612401 ?      Sl   10月16  21:52 test
tangmiao-pc       5336   0.0  1.4  9100240 238544   ??  S     3:09下午   0:31.70 /Applications
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>以上内容是通过ps aux | grep -v 'RSS TTY' 命令输出到nowcoder.txt文件下面的<br>
请你写一个脚本计算一下所有进程占用内存大小的和:</p> <p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> <span class="token string">'{sum+=<span class="token variable">$6</span>}END{print sum}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_9-统计每个单词出现的个数"><a href="#_9-统计每个单词出现的个数" class="header-anchor">#</a> 9.统计每个单词出现的个数</h2> <p><strong>描述</strong><br>
写一个 bash脚本以统计一个文本文件 nowcoder.txt 中每个单词出现的个数。</p> <p>为了简单起见，你可以假设：<br>
nowcoder.txt只包括小写字母和空格。<br>
每个单词只由小写字母组成。<br>
单词间由一个或多个空格字符分隔。</p> <p>示例:<br>
假设 nowcoder.txt 内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>welcome nowcoder
welcome to nowcoder
nowcoder
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>你的脚本应当输出（以词频升序排列）：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>to 1
welcome 2
nowcoder 3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">###思路：查看文件｜把所有单词显示在每一行｜排序｜去重｜再排序｜颠倒顺序显示</span>
<span class="token function">cat</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">tr</span> -s <span class="token string">' '</span> <span class="token string">'<span class="token entity" title="\n">\n</span>'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>,<span class="token variable">$1</span>}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_10-第二列是否有重复"><a href="#_10-第二列是否有重复" class="header-anchor">#</a> 10.第二列是否有重复</h2> <p><strong>描述</strong><br>
给定一个 nowcoder.txt文件，其中有3列信息，如下实例，编写一个shell脚本来检查文件第二列是否有重复，且有几个重复，并提取出重复的行的第二列信息：<br>
实例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>20201001 python 99
20201002 go 80
20201002 c++ 88
20201003 php 77
20201001 go 88
20201005 shell 89
20201006 java 70
20201008 c 100
20201007 java 88
20201006 go 97
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>2 java
3 go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">###思路：查看文件｜打印第二列｜排序｜去重复｜再排序｜打印数字不是1的行</span>
<span class="token function">cat</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_11-转置文件的内容"><a href="#_11-转置文件的内容" class="header-anchor">#</a> 11.转置文件的内容</h2> <p><strong>描述</strong><br>
写一个 bash脚本来转置文本文件nowcoder.txt中的文件内容。</p> <p>为了简单起见，你可以假设：<br>
你可以假设每行列数相同，并且每个字段由空格分隔</p> <p>示例:<br>
假设 nowcoder.txt 内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>job salary
c++ 13
java 14
php 12
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>你的脚本应当输出（以词频升序排列）：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>job c++ java php
salary 13 14 12
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> <span class="token string">'{for(i=1;i&lt;=NF;i++){if(NR==1){file[i]=<span class="token variable">$i</span>}else{file[i]=file[i]&quot; &quot;<span class="token variable">$i</span>}}}END{for(i=1;i&lt;NF;i++) print file[i]}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_12-打印每一行出现的数字个数"><a href="#_12-打印每一行出现的数字个数" class="header-anchor">#</a> 12.打印每一行出现的数字个数</h2> <p><strong>描述</strong><br>
写一个 bash脚本以统计一个文本文件 nowcoder.txt中每一行出现的1,2,3,4,5数字个数并且要计算一下整个文档中一共出现了几个1,2,3,4,5数字数字总数。</p> <p>示例:<br>
假设 nowcoder.txt 内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>a12b8
10ccc
2521abc
9asf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>你的脚本应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>line1 number: 2
line2 number: 1
line3 number: 4
line4 number: 0
sum is 7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">###思路 awk -F 正则；NF 单词数； NR 行号</span>
<span class="token function">awk</span> -F <span class="token string">'[1-5]'</span> <span class="token string">'{sum=sum+NF-1;print &quot;line&quot;NR&quot; number:&quot;NF-1}END{print &quot;sum is &quot;sum}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_13-去掉所有包含this的句子"><a href="#_13-去掉所有包含this的句子" class="header-anchor">#</a> 13.去掉所有包含this的句子</h2> <p><strong>描述</strong><br>
写一个 bash脚本以实现一个需求，去掉输入中含有this的语句，把不含this的语句输出</p> <p>示例:
假设 nowcoder.txt 内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>that is your bag
is this your bag?
to the degree or extent indicated.
there was a court case resulting from this incident
welcome to nowcoder
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>你的脚本应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>that is your bag
to the degree or extent indicated.
welcome to nowcoder
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> <span class="token string">'!/this/ {print <span class="token variable">$0</span>}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_14-求平均值"><a href="#_14-求平均值" class="header-anchor">#</a> 14.求平均值</h2> <p><strong>描述</strong><br>
写一个bash脚本以实现一个需求，求输入的一个的数组的平均值</p> <p>第1行为输入的数组长度N<br>
第2~N行为数组的元素，如以下为:<br>
数组长度为4，数组元素为1 2 9 8</p> <p>示例:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>4
1
2
9
8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>那么平均值为:5.000(保留小数点后面3位)<br>
你的脚本获取以上输入应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>5.000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> <span class="token string">'NR&gt;1{sum=sum+<span class="token variable">$1</span>;N++}END{printf(&quot;%.3f&quot;,sum/N)}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_15-去掉不需要的单词"><a href="#_15-去掉不需要的单词" class="header-anchor">#</a> 15.去掉不需要的单词</h2> <p><strong>描述</strong><br>
写一个 bash脚本以实现一个需求，去掉输入中的含有B和b的单词<br>
示例:<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>big
nowcoder
Betty
basic
test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>你的脚本获取以上输入应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>nowcoder test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> <span class="token string">'!/B|b/ {print <span class="token variable">$0</span>}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_16-判断输入的是否为ip地址"><a href="#_16-判断输入的是否为ip地址" class="header-anchor">#</a> 16.判断输入的是否为IP地址</h2> <p><strong>描述</strong><br>
写一个脚本统计文件nowcoder.txt中的每一行是否是正确的IP地址。<br>
如果是正确的IP地址输出：yes<br>
如果是错误的IP地址，四段号码的话输出：no，否则的话输出：error<br>
假设nowcoder.txt内容如下<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>192.168.1.1
192.168.1.0
300.0.0.0
123
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>你的脚本获取以上输入应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yes
yes
no
error
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> -F <span class="token string">'.'</span> <span class="token string">'{
    if(NF!=4) print &quot;error&quot;;
    else {
        msg=&quot;yes&quot;;
        for(i=1;i&lt;=NF;i++){
            if(<span class="token variable">$i</span>&lt;0||<span class="token variable">$i</span>&gt;255){
                msg=&quot;no&quot;;
                break;
            }
        }
        print msg;
    }
}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_17-将字段逆序输出文件的每行"><a href="#_17-将字段逆序输出文件的每行" class="header-anchor">#</a> 17.将字段逆序输出文件的每行</h2> <p><strong>描述</strong><br>
将字段逆序输出文件nowcoder.txt的每一行，其中每一字段都是用英文冒号: 相分隔。<br>
假设nowcoder.txt内容如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false
root:*:0:0:System Administrator:/var/root:/bin/sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>你的脚本获取以上输入应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/usr/bin/false:/var/empty:Unprivileged User:-2:-2:*:nobody
/bin/sh:/var/root:System Administrator:0:0:*:root
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> -F: <span class="token string">'{
    for(i=NF;i&gt;=1;i--){
        printf &quot;%s:&quot;,<span class="token variable">$i</span>
    }
    printf &quot;<span class="token entity" title="\n">\n</span>&quot;
}'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\:$//g'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_18-域名进行计数排序处理"><a href="#_18-域名进行计数排序处理" class="header-anchor">#</a> 18.域名进行计数排序处理</h2> <p><strong>描述</strong><br>
假设我们有一些域名，存储在nowcoder.txt里，现在需要你写一个脚本，将域名取出并根据域名进行计数排序处理。<br>
假设nowcoder.txt内容如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>http://www.nowcoder.com/index.html
http://www.nowcoder.com/1.html
http://m.nowcoder.com/index.html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>你的脚本获取以上输入应当输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>2 www.nowcoder.com
1 m.nowcoder.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> -F/ <span class="token string">'{print <span class="token variable">$3</span>}'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">sort</span> -r <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/^$//'</span>
<span class="token comment">###或</span>
<span class="token function">awk</span> -F/ <span class="token string">'{print <span class="token variable">$3</span>}'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">sort</span> -r <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$1</span>,<span class="token variable">$2</span>}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_19-打印等腰三角形"><a href="#_19-打印等腰三角形" class="header-anchor">#</a> 19.打印等腰三角形</h2> <p><strong>描述</strong><br>
打印边长为5的等腰三角形。<br>
你的脚本应该输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    *
   * *
  * * *
 * * * *
* * * * *
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">do</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>n<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>n<span class="token operator">&gt;=</span>i<span class="token punctuation">;</span>n<span class="token operator">--</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> -n <span class="token string">&quot; &quot;</span>
<span class="token keyword">done</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>m<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>m<span class="token operator">&lt;=</span>i<span class="token punctuation">;</span>m<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">do</span>
   <span class="token builtin class-name">echo</span> -n <span class="token string">&quot;* &quot;</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_20-打印只有一个数字的行"><a href="#_20-打印只有一个数字的行" class="header-anchor">#</a> 20.打印只有一个数字的行</h2> <p><strong>描述</strong><br>
假设我们有一个nowcoder.txt，现在需要你写脚本，打印只有一个数字的行。<br>
假设nowcoder.txt内容如下<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>haha
1
2ab
cd
77
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>那么你的脚本应该输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1
2ab
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> -F <span class="token string">'[0-9]'</span> <span class="token string">'{if(NF==2) print <span class="token variable">$0</span>}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_21-格式化输出"><a href="#_21-格式化输出" class="header-anchor">#</a> 21.格式化输出</h2> <p><strong>描述</strong><br>
我们有一个文件nowcoder.txt，里面的每一行都是一个数字串，假设数字串为“123456789”，那么我们要输出为123,456,789。<br>
假设nowcoder.txt内容如下<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1
12
123
1234
123456
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>那么你的脚本应该输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1
12
123
1,234
123,456
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">cat</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">xargs</span> -n1  <span class="token builtin class-name">printf</span> <span class="token string">&quot;%'d<span class="token entity" title="\n">\n</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_22-处理文本"><a href="#_22-处理文本" class="header-anchor">#</a> 22.处理文本</h2> <p><strong>描述</strong><br>
假设我们有一个nowcoder.txt，假设里面的内容如下<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>111:13443
222:13211
111:13643
333:12341
222:12123
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>那么你的脚本应该输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[111]
13443
13643
[222]
13211
12123
[333]
12341
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> -F <span class="token string">':'</span> <span class="token string">'{
    res[<span class="token variable">$1</span>] = (res[<span class="token variable">$1</span>] == &quot;&quot; ? <span class="token variable">$2</span> : (res[<span class="token variable">$1</span>] &quot;<span class="token entity" title="\n">\n</span>&quot; <span class="token variable">$2</span>))
}END{
    for(k in res){
        print &quot;[&quot;k&quot;]&quot;
        print res[k]
    }
}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_23-nginx日志分析1-ip统计"><a href="#_23-nginx日志分析1-ip统计" class="header-anchor">#</a> 23.nginx日志分析1-IP统计</h2> <p><strong>描述</strong><br>
假设nginx的日志我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要你统计出2020年4月23号的访问ip次数，并且按照次数降序排序。你的脚本应该输出：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>5 192.168.1.22
4 192.168.1.21
3 192.168.1.20
2 192.168.1.25
1 192.168.1.24
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">grep</span> <span class="token string">'\[23'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$1</span>}'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -r <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$1</span>,<span class="token variable">$2</span>}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_24-nginx日志分析2-统计某个时间段的ip"><a href="#_24-nginx日志分析2-统计某个时间段的ip" class="header-anchor">#</a> 24.nginx日志分析2-统计某个时间段的IP</h2> <p><strong>描述</strong><br>
假设nginx的日志我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在你需要统计2020年04月23日20-23点的去重IP访问量，你的脚本应该输出<br>
5</p> <p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">grep</span> <span class="token string">'23/Apr/2020:2[0-2]'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$1</span>}'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> <span class="token operator">|</span> <span class="token function">wc</span> -l
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_25-nginx日志分析3-统计访问3次以上的ip"><a href="#_25-nginx日志分析3-统计访问3次以上的ip" class="header-anchor">#</a> 25.nginx日志分析3-统计访问3次以上的IP</h2> <p><strong>描述</strong><br>
假设nginx的日志我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要你写脚本统计访问3次以上的IP，你的脚本应该输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>6 192.168.1.22
5 192.168.1.21
4 192.168.1.20
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$1</span>}'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -r <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{if(<span class="token variable">$1</span>&gt;3){print <span class="token variable">$1</span>,<span class="token variable">$2</span>}}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_26-nginx日志分析4-查询某个ip的详细访问情况"><a href="#_26-nginx日志分析4-查询某个ip的详细访问情况" class="header-anchor">#</a> 26.nginx日志分析4-查询某个IP的详细访问情况</h2> <p><strong>描述</strong><br>
假设nginx的日志我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要你查询192.168.1.22的详细访问情况，按访问频率降序排序。你的脚本应该输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>4 /1/index.php
2 /3/index.php
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">grep</span> <span class="token string">'192.168.1.22'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$7</span>}'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$1</span>,<span class="token variable">$2</span>}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_27-nginx日志分析5-统计爬虫抓取404的次数"><a href="#_27-nginx日志分析5-统计爬虫抓取404的次数" class="header-anchor">#</a> 27.nginx日志分析5-统计爬虫抓取404的次数</h2> <p><strong>描述</strong><br>
假设nginx的日志我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>192.168.1.20 - - [21/Apr/2020:14:12:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 301 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 500 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:21:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:10:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:05:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:12:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&quot;
192.168.1.22 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 300 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 500 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:10:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:59:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要你统计百度爬虫抓取404的次数，你的脚本应该输出<br>
2</p> <p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">grep</span> <span class="token string">'Baiduspider'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/404/ {print <span class="token variable">$0</span>}'</span> <span class="token operator">|</span> <span class="token function">wc</span> -l
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_28-nginx日志分析6-统计每分钟的请求数"><a href="#_28-nginx日志分析6-统计每分钟的请求数" class="header-anchor">#</a> 28.nginx日志分析6-统计每分钟的请求数</h2> <p><strong>描述</strong><br>
假设nginx的日志我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>192.168.1.20 - - [21/Apr/2020:14:12:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:21:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:10:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:05:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Baiduspider&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:12:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Baiduspider&quot;
192.168.1.25 - - [23/Apr/2020:16:15:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:10:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:59:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要你统计每分钟的请求数，并且按照请求数降序排序。你的脚本应该输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>5 20:27
4 15:00
2 22:10
2 14:12
2 10:27
1 23:59
1 21:21
1 16:15
1 15:26
1 09:20
1 08:05
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> -F <span class="token string">':'</span> <span class="token string">'{print <span class="token variable">$2</span>&quot;:&quot;<span class="token variable">$3</span>}'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -r <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$1</span>,<span class="token variable">$2</span>}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_29-netstat练习1-查看各个状态的连接数"><a href="#_29-netstat练习1-查看各个状态的连接数" class="header-anchor">#</a> 29.netstat练习1-查看各个状态的连接数</h2> <p><strong>描述</strong><br>
假设netstat命令运行的结果我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:42316     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
udp        0      0 127.0.0.1:323           0.0.0.0:*
udp        0      0 0.0.0.0:45881           0.0.0.0:*
udp        0      0 127.0.0.53:53           0.0.0.0:*
udp        0      0 172.16.56.200:68        0.0.0.0:*
udp6       0      0 ::1:323                 :::*
raw6       0      0 :::58                   :::*                    7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>现在需要你查看系统tcp连接中各个状态的连接数，并且按照连接数降序输出。你的脚本应该输出如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ESTABLISHED 22
TIME_WAIT 9
LISTEN 3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">grep</span> <span class="token string">'tcp'</span> nowcoder.txt<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$6</span>}'</span><span class="token operator">|</span><span class="token function">sort</span><span class="token operator">|</span><span class="token function">uniq</span> -c<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>,<span class="token variable">$1</span>}'</span><span class="token operator">|</span><span class="token function">sort</span> -nr -k2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_30-netstat练习2-查看和3306端口建立的连接"><a href="#_30-netstat练习2-查看和3306端口建立的连接" class="header-anchor">#</a> 30.netstat练习2-查看和3306端口建立的连接</h2> <p><strong>描述</strong><br>
假设netstat命令运行的结果我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:42316     172.16.34.143:3306      ESTABLISHED
tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
udp        0      0 127.0.0.1:323           0.0.0.0:*
udp        0      0 0.0.0.0:45881           0.0.0.0:*
udp        0      0 127.0.0.53:53           0.0.0.0:*
udp        0      0 172.16.56.200:68        0.0.0.0:*
udp6       0      0 ::1:323                 :::*
raw6       0      0 :::58                   :::*                    7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>现在需要你查看和本机3306端口建立连接并且状态是established的所有IP，按照连接数降序排序。你的脚本应该输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>10 172.16.0.24
9 172.16.34.144
1 172.16.34.143
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">cat</span> nowcoder.txt<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'3306'</span><span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'ESTABLISHED'</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$5</span>}'</span><span class="token operator">|</span><span class="token function">sed</span> <span class="token string">'s/:3306//g'</span><span class="token operator">|</span><span class="token function">sort</span><span class="token operator">|</span><span class="token function">uniq</span> -c<span class="token operator">|</span><span class="token function">sort</span> -nr<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$1</span>,<span class="token variable">$2</span>}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_31-netstat练习3-输出每个ip的连接数"><a href="#_31-netstat练习3-输出每个ip的连接数" class="header-anchor">#</a> 31.netstat练习3-输出每个IP的连接数</h2> <p><strong>描述</strong><br>
假设netstat命令运行的结果我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:42316     172.16.34.143:3306      ESTABLISHED
tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
udp        0      0 127.0.0.1:323           0.0.0.0:*
udp        0      0 0.0.0.0:45881           0.0.0.0:*
udp        0      0 127.0.0.53:53           0.0.0.0:*
udp        0      0 172.16.56.200:68        0.0.0.0:*
udp6       0      0 ::1:323                 :::*
raw6       0      0 :::58                   :::*                    7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>现在需要你输出每个IP的连接数，按照连接数降序排序。你的脚本应该输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>172.16.0.24 10
172.16.34.144 9
100.100.142.4 3
0.0.0.0 3
172.16.34.143 1
172.16.240.74 1
120.55.222.235 1
100.100.54.133 1
100.100.45.106 1
100.100.32.118 1
100.100.30.25 1
100.100.142.5 1
100.100.142.1 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">cat</span> nowcoder.txt<span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'tcp'</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$5</span>}'</span><span class="token operator">|</span><span class="token function">awk</span> -F <span class="token string">&quot;:&quot;</span> <span class="token string">'{print <span class="token variable">$1</span>}'</span><span class="token operator">|</span><span class="token function">sort</span><span class="token operator">|</span><span class="token function">uniq</span> -c<span class="token operator">|</span><span class="token function">sort</span> -nr -k1<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>,<span class="token variable">$1</span>}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_32-netstat练习4-输出和3306端口建立连接总的各个状态的数目"><a href="#_32-netstat练习4-输出和3306端口建立连接总的各个状态的数目" class="header-anchor">#</a> 32.netstat练习4-输出和3306端口建立连接总的各个状态的数目</h2> <p><strong>描述</strong><br>
假设netstat命令运行的结果我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:42316     172.16.34.143:3306      ESTABLISHED
tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
udp        0      0 127.0.0.1:323           0.0.0.0:*
udp        0      0 0.0.0.0:45881           0.0.0.0:*
udp        0      0 127.0.0.53:53           0.0.0.0:*
udp        0      0 172.16.56.200:68        0.0.0.0:*
udp6       0      0 ::1:323                 :::*
raw6       0      0 :::58                   :::*                    7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>现在需要你输出和本机3306端口建立连接的各个状态的数目，按照以下格式输出<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>TOTAL_IP 3
ESTABLISHED 20
TOTAL_LINK 20
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">cat</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;:3306&quot;</span> <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{if(<span class="token variable">$1</span>=&quot;tcp&quot;) {split(<span class="token variable">$5</span>,a,&quot;:&quot;);c1[a[1]]++;if(<span class="token variable">$6</span>==&quot;ESTABLISHED&quot;) c2++}}END{for(i in c1) c3++;print &quot;TOTAL_IP &quot;c3&quot;<span class="token entity" title="\n">\n</span>ESTABLISHED &quot;c2&quot;<span class="token entity" title="\n">\n</span>TOTAL_LINK &quot;c2}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_33-业务分析-提取值"><a href="#_33-业务分析-提取值" class="header-anchor">#</a> 33.业务分析-提取值</h2> <p><strong>描述</strong><br>
假设我们的日志nowcoder.txt里，内容如下<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>12-May-2017 10:02:22.789 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:Apache Tomcat/8.5.15
12-May-2017 10:02:22.813 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:May 5 2017 11:03:04 UTC
12-May-2017 10:02:22.813 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:8.5.15.0
12-May-2017 10:02:22.814 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:Windows, OS Version:10
12-May-2017 10:02:22.814 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>现在需要你提取出对应的值，输出内容如下<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>serverVersion:Apache Tomcat/8.5.15
serverNumber:8.5.15.0
osName:Windows
osVersion:10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> -F <span class="token string">&quot;[:,]&quot;</span> <span class="token string">'{
    if(<span class="token variable">$0</span>~&quot;Server version&quot;){
        print &quot;serverVersion:&quot; <span class="token variable">$4</span>;
    }
    if(<span class="token variable">$0</span>~&quot;Server number&quot;){
        print &quot;serverNumber:&quot; <span class="token variable">$4</span>;
    }
    if(<span class="token variable">$0</span>~&quot;OS Name&quot;){
        print &quot;osName:&quot; <span class="token variable">$4</span>;
    }
    if(<span class="token variable">$0</span>~&quot;OS Version&quot;){
        print &quot;osVersion:&quot; <span class="token variable">$6</span>
    }
}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_34-ps分析-统计vsz-rss各自总和"><a href="#_34-ps分析-统计vsz-rss各自总和" class="header-anchor">#</a> 34.ps分析-统计VSZ,RSS各自总和</h2> <p><strong>描述</strong><br>
假设命令运行的结果我们存储在nowcoder.txt里，格式如下：<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.1  37344  4604 ?        Ss    2020   2:13 /sbin/init
root       231  0.0  1.5 166576 62740 ?        Ss    2020  15:15 /lib/systemd/systemd-journald
root       237  0.0  0.0      0     0 ?        S&lt;    2020   2:06 [kworker/0:1H]
root       259  0.0  0.0  45004  3416 ?        Ss    2020   0:25 /lib/systemd/systemd-udevd
root       476  0.0  0.0      0     0 ?        S&lt;    2020   0:00 [edac-poller]
root       588  0.0  0.0 276244  2072 ?        Ssl   2020   9:49 /usr/lib/accountsservice/accounts-daemon
message+   592  0.0  0.0  42904  3032 ?        Ss    2020   0:01 /usr/bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation
root       636  0.0  0.0  65532  3200 ?        Ss    2020   1:51 /usr/sbin/sshd -D
daemon     637  0.0  0.0  26044  2076 ?        Ss    2020   0:00 /usr/sbin/atd -f
root       639  0.0  0.0  29476  2696 ?        Ss    2020   3:29 /usr/sbin/cron -f
root       643  0.0  0.0  20748  1992 ?        Ss    2020   0:26 /lib/systemd/systemd-logind
syslog     645  0.0  0.0 260636  3024 ?        Ssl   2020   3:17 /usr/sbin/rsyslogd -n
root       686  0.0  0.0 773124  2836 ?        Ssl   2020  26:45 /usr/sbin/nscd
root       690  0.0  0.0  19472   252 ?        Ss    2020  14:39 /usr/sbin/irqbalance --pid=/var/run/irqbalance.pid
ntp        692  0.0  0.0  98204   776 ?        Ss    2020  25:18 /usr/sbin/ntpd -p /var/run/ntpd.pid -g -u 108:114
uuidd      767  0.0  0.0  28624   192 ?        Ss    2020   0:00 /usr/sbin/uuidd --socket-activation
root       793  0.0  0.0 128812  3148 ?        Ss    2020   0:00 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
www-data   794  0.0  0.2 133376  9120 ?        S     2020 630:57 nginx: worker process
www-data   795  0.0  0.2 133208  8968 ?        S     2020 633:02 nginx: worker process
www-data   796  0.0  0.2 133216  9120 ?        S     2020 634:24 nginx: worker process
www-data   797  0.0  0.2 133228  9148 ?        S     2020 632:56 nginx: worker process
web        955  0.0  0.0  36856  2112 ?        Ss    2020   0:00 /lib/systemd/systemd --user
web        956  0.0  0.0  67456  1684 ?        S     2020   0:00 (sd-pam)
root      1354  0.0  0.0   8172   440 tty1     Ss+   2020   0:00 /sbin/agetty --noclear tty1 linux
root      1355  0.0  0.0   7988   344 ttyS0    Ss+   2020   0:00 /sbin/agetty --keep-baud 115200 38400 9600 ttyS0 vt220
root      2513  0.0  0.0      0     0 ?        S    13:07   0:00 [kworker/u4:1]
root      2587  0.0  0.0      0     0 ?        S    13:13   0:00 [kworker/u4:2]
root      2642  0.0  0.0      0     0 ?        S    13:17   0:00 [kworker/1:0]
root      2679  0.0  0.0      0     0 ?        S    13:19   0:00 [kworker/u4:0]
root      2735  0.0  0.1 102256  7252 ?        Ss   13:24   0:00 sshd: web [priv]
web       2752  0.0  0.0 102256  3452 ?        R    13:24   0:00 sshd: web@pts/0
web       2753  0.5  0.1  14716  4708 pts/0    Ss   13:24   0:00 -bash
web       2767  0.0  0.0  29596  1456 pts/0    R+   13:24   0:00 ps aux
root     10634  0.0  0.0      0     0 ?        S    Nov16   0:00 [kworker/0:0]
root     16585  0.0  0.0      0     0 ?        S&lt;    2020   0:00 [bioset]
root     19526  0.0  0.0      0     0 ?        S    Nov16   0:00 [kworker/1:1]
root     28460  0.0  0.0      0     0 ?        S    Nov15   0:03 [kworker/0:2]
root     30685  0.0  0.0  36644  2760 ?        Ss    2020   0:00 /lib/systemd/systemd --user
root     30692  0.0  0.0  67224  1664 ?        S     2020   0:00 (sd-pam)
root     32689  0.0  0.0  47740  2100 ?        Ss    2020   0:00 /usr/local/ilogtail/ilogtail
root     32691  0.2  0.5 256144 23708 ?        Sl    2020 1151:31 /usr/local/ilogtail/ilogtail
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>现在需要你统计VSZ，RSS各自的总和（以M兆为统计），输出格式如下<br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>MEM TOTAL
VSZ_SUM:3250.8M,RSS_SUM:179.777M
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>解答</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">awk</span> <span class="token string">'{a=a+<span class="token variable">$5</span>;b=b+<span class="token variable">$6</span>}END{print &quot;MEM TOTAL&quot;;print &quot;VSZ_SUM:&quot;a/1024&quot;M,RSS_SUM:&quot;b/1024&quot;M&quot;}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2022/6/28 16:24:52</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/wenyangliublog/assets/js/app.05c06663.js" defer></script><script src="/wenyangliublog/assets/js/3.dedc53ea.js" defer></script><script src="/wenyangliublog/assets/js/1.4a671905.js" defer></script><script src="/wenyangliublog/assets/js/53.13fa7b2b.js" defer></script>
  </body>
</html>
